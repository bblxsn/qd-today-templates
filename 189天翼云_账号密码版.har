[
    {
        "comment": "扫码页面初始页面",
        "request": {
            "method": "GET",
            "url": "https://cloud.189.cn/api/portal/loginUrl.action?redirectURL=https%3A%2F%2Fcloud.189.cn%2Fweb%2Fredirect.html%3FreturnURL%3D%2Fmain.action",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:74.0) Gecko/20100101 Firefox/76.0"
                }
            ],
            "cookies": [],
            "data": "",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "302",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "saomaurl",
                    "re": "([\\s\\S]*)",
                    "from": "header-location"
                }
            ]
        }
    },
    {
        "comment": "正式扫码页面",
        "request": {
            "method": "GET",
            "url": "{{saomaurl}}",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:74.0) Gecko/20100101 Firefox/76.0"
                }
            ],
            "cookies": [],
            "data": "",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "302",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "toUrl",
                    "re": ".+",
                    "from": "header-location"
                },
                {
                    "name": "reqid",
                    "re": "reqId=(.+?)[&\"]+",
                    "from": "content"
                },
                {
                    "name": "lt",
                    "re": "lt=(.+?)[&\"]+",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "获取app信息",
        "request": {
            "method": "POST",
            "url": "https://open.e.189.cn/api/logbox/oauth2/appConf.do",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:74.0) Gecko/20100101 Firefox/76.0"
                },
                {
                    "name": "reqid",
                    "value": "{{reqid}}"
                },
                {
                    "name": "lt",
                    "value": "{{lt}}"
                },
                {
                    "name": "referer",
                    "value": "{{toUrl}}"
                },
                {
                    "name": "content-type",
                    "value": "application/x-www-form-urlencoded"
                }
            ],
            "cookies": [],
            "data": "version=2.0&appKey=cloud",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "paramId",
                    "re": "\"paramId\":\"(.+?)\"",
                    "from": "content"
                },
                {
                    "name": "mailSuffix",
                    "re": "\"mailSuffix\":\"(.+?)\"",
                    "from": "content"
                },
                {
                    "name": "returnUrl",
                    "re": "\"returnUrl\":\"(.+?)\"",
                    "from": "content"
                },
                {
                    "name": "reqid",
                    "re": "\"reqId\":\"(.+?)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "获取rsa",
        "request": {
            "method": "POST",
            "url": "https://open.e.189.cn/api/logbox/config/encryptConf.do",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:74.0) Gecko/20100101 Firefox/76.0"
                }
            ],
            "cookies": [],
            "data": "appId=cloud",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "pre",
                    "re": "\"pre\":\"(.+?)\"",
                    "from": "content"
                },
                {
                    "name": "pubKey",
                    "re": "\"pubKey\":\"(.+?)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "[username]RSA加密",
        "request": {
            "method": "GET",
            "url": "api://util/rsa?f=encode&key=-----BEGIN%20PUBLIC%20KEY-----{{pubKey|urlencode}}-----END%20PUBLIC%20KEY-----&data={{username|urlencode}}",
            "headers": [],
            "cookies": [],
            "data": ""
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "userrsakey",
                    "re": "(.*)",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "hex转换",
        "request": {
            "method": "POST",
            "url": "api://util/string/replace",
            "headers": [],
            "cookies": [],
            "data": "r=json&p=&s={{unicode(b2a_hex(a2b_base64(userrsakey), sep=' ', bytes_per_sep=1))|urlencode}}&t="
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                },
                {
                    "re": "\"状态\": \"OK\"",
                    "from": "content"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "hexuserrsakey",
                    "re": "\"处理后字符串\": \"(.*)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "unicode转换",
        "request": {
            "method": "GET",
            "url": "api://util/unicode?content={{pre|urlencode}}{{hexuserrsakey|replace(' ','')|urlencode}}",
            "headers": [],
            "cookies": []
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                },
                {
                    "re": "\"状态\": \"200\"",
                    "from": "content"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "userkey",
                    "re": "\"转换后\": \"(.*)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "password[RSA加密]",
        "request": {
            "method": "GET",
            "url": "api://util/rsa?key=-----BEGIN%20PUBLIC%20KEY-----{{pubKey|urlencode}}-----END%20PUBLIC%20KEY-----&data={{password|urlencode}}&f=encode",
            "headers": [],
            "cookies": []
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "passrsakey",
                    "re": "(.*)",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "hex转换",
        "request": {
            "method": "POST",
            "url": "api://util/string/replace",
            "headers": [],
            "cookies": [],
            "data": "r=json&p=&s={{unicode(b2a_hex(a2b_base64(passrsakey), sep=' ', bytes_per_sep=1))|urlencode}}&t="
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                },
                {
                    "re": "\"状态\": \"OK\"",
                    "from": "content"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "hexpassrsakey",
                    "re": "\"处理后字符串\": \"(.*)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "unicode转换",
        "request": {
            "method": "GET",
            "url": "api://util/unicode?content={{pre|urlencode}}{{hexpassrsakey|replace(' ','')|urlencode}}",
            "headers": [],
            "cookies": []
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                },
                {
                    "re": "\"状态\": \"200\"",
                    "from": "content"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "passkey",
                    "re": "\"转换后\": \"(.*)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "captcha",
        "request": {
            "method": "POST",
            "url": "https://open.e.189.cn/api/logbox/oauth2/needcaptcha.do",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:74.0) Gecko/20100101 Firefox/76.0"
                },
                {
                    "name": "lt",
                    "value": "{{lt}}"
                },
                {
                    "name": "referer",
                    "value": "{{toUrl}}"
                },
                {
                    "name": "content-type",
                    "value": "application/x-www-form-urlencoded"
                }
            ],
            "cookies": [],
            "data": "accountType=01&userName={{userkey}}&appKey=cloud",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "paramId",
                    "re": "\"paramId\":\"(.+?)\"",
                    "from": "content"
                },
                {
                    "name": "mailSuffix",
                    "re": "\"mailSuffix\":\"(.+?)\"",
                    "from": "content"
                },
                {
                    "name": "returnUrl",
                    "re": "\"returnUrl\":\"(.+?)\"",
                    "from": "content"
                },
                {
                    "name": "reqid",
                    "re": "\"reqId\":\"(.+?)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "登录",
        "request": {
            "method": "POST",
            "url": "https://open.e.189.cn/api/logbox/oauth2/loginSubmit.do",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:74.0) Gecko/20100101 Firefox/76.0"
                },
                {
                    "name": "lt",
                    "value": "{{lt}}"
                },
                {
                    "name": "Referer",
                    "value": "https://open.e.189.cn/"
                }
            ],
            "cookies": [],
            "data": "version=v2.0&apToken=&appKey=cloud&accountType=01&userName={{userkey}}&epd={{passkey}}&captchaType=&validateCode=&smsValidateCode=&captchaToken=&returnUrl={{returnUrl}}&mailSuffix={{mailSuffix}}&dynamicCheck=FALSE&clientType=1&cb_SaveName=1&isOauth2=false&state=&paramId={{paramId}}",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [
                {
                    "re": "\"result\":[^0]",
                    "from": "content"
                }
            ],
            "extract_variables": [
                {
                    "name": "tourl",
                    "re": "\"toUrl\":\"(.*?)\"",
                    "from": "content"
                },
                {
                    "name": "msg",
                    "re": "msg\":\"(.*?)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "登录成功后跳转",
        "request": {
            "method": "GET",
            "url": "{{tourl}}",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:74.0) Gecko/20100101 Firefox/76.0"
                },
                {
                    "name": "lt",
                    "value": "{{lt}}"
                }
            ],
            "cookies": [],
            "data": "",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [],
            "failed_asserts": [],
            "extract_variables": []
        }
    },
    {
        "comment": "时间戳",
        "request": {
            "method": "GET",
            "url": "api://util/unicode?content={{multiply(timestamp('float'),1000)|urlencode}}",
            "headers": [],
            "cookies": []
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                },
                {
                    "re": "\"状态\": \"200\"",
                    "from": "content"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "_timestamp1",
                    "re": "\"转换后\": \"(.............)",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "签到",
        "request": {
            "method": "GET",
            "url": "https://api.cloud.189.cn/mkt/userSign.action?rand={{_timestamp1|urlencode}}&clientType=TELEANDROID&version=8.6.3&model=SM-G930K",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Linux; Android 5.1.1; SM-G930K Build/NRD90M; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.136 Mobile Safari/537.36 Ecloud/8.6.3 Android/22 clientId/355325117317828 clientModel/SM-G930K imsi/460071114317824 clientChannelId/qq proVersion/1.0.6"
                },
                {
                    "name": "Referer",
                    "value": "https://m.cloud.189.cn/zhuanti/2016/sign/index.jsp?albumBackupOpened=1"
                },
                {
                    "name": "Host",
                    "value": "m.cloud.189.cn"
                }
            ],
            "cookies": [],
            "data": "",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "netdiskBonus",
                    "re": "\"netdiskBonus\":(.+?),",
                    "from": "content"
                },
                {
                    "name": "isSign",
                    "re": "\"isSign\":(.+?)[},]+",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "抽奖1",
        "request": {
            "method": "GET",
            "url": "https://m.cloud.189.cn/v2/drawPrizeMarketDetails.action?taskId=TASK_SIGNIN&activityId=ACT_SIGNIN",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Linux; Android 5.1.1; SM-G930K Build/NRD90M; wv)AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.136 Mobile Safari/537.36 Ecloud/8.6.3 Android/22 clientId/355325117317828 clientModel/SM-G930K imsi/460071114317824 clientChannelId/qq proVersion/1.0.6"
                },
                {
                    "name": "Referer",
                    "value": "https://m.cloud.189.cn/zhuanti/2016/sign/index.jsp?albumBackupOpened=1"
                },
                {
                    "name": "Host",
                    "value": "m.cloud.189.cn"
                }
            ],
            "cookies": [],
            "data": "",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "prizeName1",
                    "re": "\"prizeName\":\"(.+?)\"",
                    "from": "content"
                },
                {
                    "name": "errorCode1",
                    "re": "\"errorCode\":\"(.+?)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "抽奖2",
        "request": {
            "method": "GET",
            "url": "https://m.cloud.189.cn/v2/drawPrizeMarketDetails.action?taskId=TASK_SIGNIN_PHOTOS&activityId=ACT_SIGNIN",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Linux; Android 5.1.1; SM-G930K Build/NRD90M; wv)AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.136 Mobile Safari/537.36 Ecloud/8.6.3 Android/22 clientId/355325117317828 clientModel/SM-G930K imsi/460071114317824 clientChannelId/qq proVersion/1.0.6"
                },
                {
                    "name": "Referer",
                    "value": "https://m.cloud.189.cn/zhuanti/2016/sign/index.jsp?albumBackupOpened=1"
                },
                {
                    "name": "Host",
                    "value": "m.cloud.189.cn"
                }
            ],
            "cookies": [],
            "data": "",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "prizeName2",
                    "re": "\"prizeName\":\"(.+?)\"",
                    "from": "content"
                },
                {
                    "name": "errorCode2",
                    "re": "\"errorCode\":\"(.+?)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "抽奖3",
        "request": {
            "method": "GET",
            "url": "https://m.cloud.189.cn/v2/drawPrizeMarketDetails.action?taskId=TASK_2022_FLDFS_KJ&activityId=ACT_SIGNIN",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Linux; Android 5.1.1; SM-G930K Build/NRD90M; wv)AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.136 Mobile Safari/537.36 Ecloud/8.6.3 Android/22 clientId/355325117317828 clientModel/SM-G930K imsi/460071114317824 clientChannelId/qq proVersion/1.0.6"
                },
                {
                    "name": "Referer",
                    "value": "https://m.cloud.189.cn/zhuanti/2016/sign/index.jsp?albumBackupOpened=1"
                },
                {
                    "name": "Host",
                    "value": "m.cloud.189.cn"
                }
            ],
            "cookies": [],
            "data": "",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "prizeName3",
                    "re": "\"prizeName\":\"(.+?)\"",
                    "from": "content"
                },
                {
                    "name": "errorCode3",
                    "re": "\"errorCode\":\"(.+?)\"",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "登出",
        "request": {
            "method": "GET",
            "url": "https://cloud.189.cn/api/portal/logout.action?redirectURL=https%3A%2F%2Fcloud.189.cn%2Fweb%2Flogin.html",
            "headers": [
                {
                    "name": "Accept-Encoding",
                    "value": "gzip, deflate"
                },
                {
                    "name": "Accept",
                    "value": "*/*"
                },
                {
                    "name": "Connection",
                    "value": "keep-alive"
                },
                {
                    "name": "User-Agent",
                    "value": "Mozilla/5.0 (Linux; Android 5.1.1; SM-G930K Build/NRD90M; wv)AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.136 Mobile Safari/537.36 Ecloud/8.6.3 Android/22 clientId/355325117317828 clientModel/SM-G930K imsi/460071114317824 clientChannelId/qq proVersion/1.0.6"
                }
            ],
            "cookies": [],
            "data": "",
            "mimeType": "application/x-www-form-urlencoded; charset=UTF-8"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                },
                {
                    "re": "302",
                    "from": "status"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "prizeName2",
                    "re": "prizeName",
                    "from": "content"
                },
                {
                    "name": "errorCode2",
                    "re": "errorCode",
                    "from": "content"
                }
            ]
        }
    },
    {
        "comment": "Unicode转换",
        "request": {
            "method": "POST",
            "url": "api://util/unicode",
            "headers": [],
            "cookies": [],
            "data": "content=登录信息：{{msg}} \\r\\n签到状态：{{isSign}}，签到获得{{netdiskBonus}}M空间 \\r\\n第一次抽奖：{{prizeName1}} {{errorCode1}} \\r\\n第二次抽奖：{{prizeName2}} {{errorCode2}}\\r\\n第三次抽奖：{{prizeName3}} {{errorCode3}}"
        },
        "rule": {
            "success_asserts": [
                {
                    "re": "200",
                    "from": "status"
                },
                {
                    "re": "\"状态\": \"200\"",
                    "from": "content"
                }
            ],
            "failed_asserts": [],
            "extract_variables": [
                {
                    "name": "__log__",
                    "re": "\"转换后\": \"(.*)\"",
                    "from": "content"
                }
            ]
        }
    }
]